[
  {
    "url": "https://api.github.com/repos/quarnster/SublimeClang/issues/comments/6090893",
    "html_url": "https://github.com/quarnster/SublimeClang/issues/63#issuecomment-6090893",
    "issue_url": "https://api.github.com/repos/quarnster/SublimeClang/issues/63",
    "id": 6090893,
    "user": {
      "login": "berkus",
      "id": 80306,
      "avatar_url": "https://secure.gravatar.com/avatar/29191c38b8d1e4d6a3a25846c5e673c9?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
      "gravatar_id": "29191c38b8d1e4d6a3a25846c5e673c9",
      "url": "https://api.github.com/users/berkus",
      "html_url": "https://github.com/berkus",
      "followers_url": "https://api.github.com/users/berkus/followers",
      "following_url": "https://api.github.com/users/berkus/following",
      "gists_url": "https://api.github.com/users/berkus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/berkus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/berkus/subscriptions",
      "organizations_url": "https://api.github.com/users/berkus/orgs",
      "repos_url": "https://api.github.com/users/berkus/repos",
      "events_url": "https://api.github.com/users/berkus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/berkus/received_events",
      "type": "User"
    },
    "created_at": "2012-06-04T01:28:18Z",
    "updated_at": "2012-06-04T01:28:18Z",
    "body": "Actually, I can force the analyzer (which is an external executable) to run in 32 bits mode, but not the main clang parser."
  },
  {
    "url": "https://api.github.com/repos/quarnster/SublimeClang/issues/comments/6092538",
    "html_url": "https://github.com/quarnster/SublimeClang/issues/63#issuecomment-6092538",
    "issue_url": "https://api.github.com/repos/quarnster/SublimeClang/issues/63",
    "id": 6092538,
    "user": {
      "login": "quarnster",
      "id": 1230389,
      "avatar_url": "https://secure.gravatar.com/avatar/10a89302c6736c988ce06d8a41c923c0?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
      "gravatar_id": "10a89302c6736c988ce06d8a41c923c0",
      "url": "https://api.github.com/users/quarnster",
      "html_url": "https://github.com/quarnster",
      "followers_url": "https://api.github.com/users/quarnster/followers",
      "following_url": "https://api.github.com/users/quarnster/following",
      "gists_url": "https://api.github.com/users/quarnster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/quarnster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/quarnster/subscriptions",
      "organizations_url": "https://api.github.com/users/quarnster/orgs",
      "repos_url": "https://api.github.com/users/quarnster/repos",
      "events_url": "https://api.github.com/users/quarnster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/quarnster/received_events",
      "type": "User"
    },
    "created_at": "2012-06-04T05:20:49Z",
    "updated_at": "2012-06-04T05:20:49Z",
    "body": "What's the error and how do I reproduce?"
  },
  {
    "url": "https://api.github.com/repos/quarnster/SublimeClang/issues/comments/6097479",
    "html_url": "https://github.com/quarnster/SublimeClang/issues/63#issuecomment-6097479",
    "issue_url": "https://api.github.com/repos/quarnster/SublimeClang/issues/63",
    "id": 6097479,
    "user": {
      "login": "berkus",
      "id": 80306,
      "avatar_url": "https://secure.gravatar.com/avatar/29191c38b8d1e4d6a3a25846c5e673c9?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
      "gravatar_id": "29191c38b8d1e4d6a3a25846c5e673c9",
      "url": "https://api.github.com/users/berkus",
      "html_url": "https://github.com/berkus",
      "followers_url": "https://api.github.com/users/berkus/followers",
      "following_url": "https://api.github.com/users/berkus/following",
      "gists_url": "https://api.github.com/users/berkus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/berkus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/berkus/subscriptions",
      "organizations_url": "https://api.github.com/users/berkus/orgs",
      "repos_url": "https://api.github.com/users/berkus/repos",
      "events_url": "https://api.github.com/users/berkus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/berkus/received_events",
      "type": "User"
    },
    "created_at": "2012-06-04T12:09:38Z",
    "updated_at": "2012-06-04T12:11:57Z",
    "body": "The project I'm using it on is built in 32-bits mode and defines among other things\n\ntypedef uint32_t size_t;\n\nThen, it includes clang's lib/clang/3.1/include/stddef.h which tries to redefine size_t with \n\n#ifndef _SIZE_T\n#define _SIZE_T\ntypedef __typeof__(sizeof(int)) size_t;\n\nAnd this fails because sizeof(int) has 64-bit type. \n\nEasiest reproduce step:\n\n$ cat file.h\n#include &lt;/usr/local/lib/clang/2.9/include/stdint.h>\ntypedef uint32_t size_t;\n#include &lt;/usr/local/lib/clang/2.9/include/stddef.h>\n\nWhich results in (this is on different machine though, where I don't have custom stdinc paths and -nostdinc, so I used absolute include paths):\n\n/usr/local/lib/clang/2.9/include/stdint.h:32,36 - Warning - #include_next with absolute path\n/usr/local/lib/clang/2.9/include/stdint.h:33,3 - Warning - #include_next with absolute path\n**/usr/local/lib/clang/2.9/include/stddef.h:32,33 - Error - typedef redefinition with different types ('typeof (sizeof(int))' (aka 'unsigned long') vs 'uint32_t' (aka 'unsigned int'))**\n/Users/berkus/test.h:2,18 - Note - previous definition is here\n\nI believe once clang is forced to build in 32 bits mode this problem should go away (doesn't happen when I compile from the makefile with clang -m32)"
  },
  {
    "url": "https://api.github.com/repos/quarnster/SublimeClang/issues/comments/6098021",
    "html_url": "https://github.com/quarnster/SublimeClang/issues/63#issuecomment-6098021",
    "issue_url": "https://api.github.com/repos/quarnster/SublimeClang/issues/63",
    "id": 6098021,
    "user": {
      "login": "quarnster",
      "id": 1230389,
      "avatar_url": "https://secure.gravatar.com/avatar/10a89302c6736c988ce06d8a41c923c0?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
      "gravatar_id": "10a89302c6736c988ce06d8a41c923c0",
      "url": "https://api.github.com/users/quarnster",
      "html_url": "https://github.com/quarnster",
      "followers_url": "https://api.github.com/users/quarnster/followers",
      "following_url": "https://api.github.com/users/quarnster/following",
      "gists_url": "https://api.github.com/users/quarnster/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/quarnster/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/quarnster/subscriptions",
      "organizations_url": "https://api.github.com/users/quarnster/orgs",
      "repos_url": "https://api.github.com/users/quarnster/repos",
      "events_url": "https://api.github.com/users/quarnster/events{/privacy}",
      "received_events_url": "https://api.github.com/users/quarnster/received_events",
      "type": "User"
    },
    "created_at": "2012-06-04T12:47:23Z",
    "updated_at": "2012-06-04T12:47:23Z",
    "body": "```c++\n#include <stdint.h>\ntypedef uint32_t size_t;\n#include <stddef.h>\n\n```\n\nI'm getting the same error both with -m32 and without using the standalone compiler:\n```\n$ clang -m32 test.cpp\nIn file included from test.cpp:3:\n/usr/local/Cellar/llvm/3.0/bin/../lib/clang/3.0/include/stddef.h:35:33: error: typedef redefinition with different types ('typeof (sizeof(int))' (aka 'unsigned long') vs 'uint32_t'\n      (aka 'unsigned int'))\ntypedef __typeof__(sizeof(int)) size_t;\n                                ^\ntest.cpp:2:18: note: previous definition is here\ntypedef uint32_t size_t;\n                 ^\n1 error generated.\n$ clang test.cpp\nIn file included from test.cpp:3:\n/usr/local/Cellar/llvm/3.0/bin/../lib/clang/3.0/include/stddef.h:35:33: error: typedef redefinition with different types ('typeof (sizeof(int))' (aka 'unsigned long') vs 'uint32_t'\n      (aka 'unsigned int'))\ntypedef __typeof__(sizeof(int)) size_t;\n                                ^\ntest.cpp:2:18: note: previous definition is here\ntypedef uint32_t size_t;\n                 ^\n1 error generated.\n```\nChanging the typedef to use \"unsigned long\" rather than \"uint32_t\" works fine both with and without -m32 though.\n\n\nAnd just to verify that -m32 does indeed work:\n```c++\n\n#include <stdio.h>\n#include <stddef.h>\n\nint main(int argc, char **argv)\n{\n    typedef __typeof__(sizeof(int)) a;\n\n    printf(\"int: %ld, pointer: %ld, long: %ld, size_t: %ld, a: %ld\\n\", sizeof(int), sizeof(int*), sizeof(long), sizeof(size_t), sizeof(a));\n    return 0;\n}\n```\n```\n$ clang -m32 blah.cpp && ./a.out\nint: 4, pointer: 4, long: 4, size_t: 4, a: 4\n$ clang blah.cpp && ./a.out\nint: 4, pointer: 8, long: 8, size_t: 8, a: 8\n```\n\nI've also verified that libclang (atleast in the clangexp branch) does indeed respect the -m32 (verified by looking at the built in macros defined) so whatever the issue is, it's not with 32 vs 64 bit compilation not being respected."
  },
  {
    "url": "https://api.github.com/repos/quarnster/SublimeClang/issues/comments/6107191",
    "html_url": "https://github.com/quarnster/SublimeClang/issues/63#issuecomment-6107191",
    "issue_url": "https://api.github.com/repos/quarnster/SublimeClang/issues/63",
    "id": 6107191,
    "user": {
      "login": "berkus",
      "id": 80306,
      "avatar_url": "https://secure.gravatar.com/avatar/29191c38b8d1e4d6a3a25846c5e673c9?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png",
      "gravatar_id": "29191c38b8d1e4d6a3a25846c5e673c9",
      "url": "https://api.github.com/users/berkus",
      "html_url": "https://github.com/berkus",
      "followers_url": "https://api.github.com/users/berkus/followers",
      "following_url": "https://api.github.com/users/berkus/following",
      "gists_url": "https://api.github.com/users/berkus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/berkus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/berkus/subscriptions",
      "organizations_url": "https://api.github.com/users/berkus/orgs",
      "repos_url": "https://api.github.com/users/berkus/repos",
      "events_url": "https://api.github.com/users/berkus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/berkus/received_events",
      "type": "User"
    },
    "created_at": "2012-06-04T18:55:51Z",
    "updated_at": "2012-06-04T18:55:51Z",
    "body": "The problem seems to be the stddef.h file erroneously included somewhere in my code. I've changed the size_t typedef for now hoping it will be ok for syntax checking.\n\nSorry for the noise."
  }
]
